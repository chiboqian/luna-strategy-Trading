rules:
  # Trend Monitor: QQQ Uptrend (Price > SMA 50)
  - name: "QQQ Uptrend"
    symbol: "QQQ"
    asset_class: "stock"
    trigger: "bar"
    conditions:
      - field: "close"
        operator: ">"
        value: "sma_50"
      - field: "rsi_14"
        operator: "<"
        value: 65.0
      - field: "z_score_vwap_50"
        operator: "<"
        value: 2.0
    action:
      command: "python Trading/Trading/alpaca_buy_cli.py tqqq 5000 --mid-price --stop-loss-pct 1 --take-profit-pct 1.5"
    cooldown: 900

  # Trend Monitor: QQQ Downtrend (Price < SMA 50)
  - name: "QQQ Downtrend"
    symbol: "QQQ"
    asset_class: "stock"
    trigger: "bar"
    conditions:
      - field: "close"
        operator: "<"
        value: "sma_50"
      - field: "rsi_14"
        operator: ">"
        value: 35.0
    action:
      command: "python Trading/Trading/alpaca_short_sell_cli.py tqqq 5000 --mid-price --stop-loss-pct 1 --take-profit-pct 1.5"
    cooldown: 900

  # Example 14: Opposite Trigger (Overbought Uptrend)
  # Triggers when RSI is overbought (> 75) AND Price is above SMA 200
  - name: "QQQ Overbought Uptrend"
    symbol: "QQQ"
    asset_class: "stock"
    trigger: "bar"
    conditions:
      - field: "rsi_14"
        operator: ">"
        value: 75.0
      - field: "close"
        operator: ">"
        value: "sma_200"
    action:
      # RSI > 70 suggests a pullback, so we execute a Long Put (Mean Reversion trade)
      #command: "{python} Trading/options_trading/long_put.py tqqq --amount 5000 --limit-order --days 30"
      command: "python Trading/Trading/alpaca_short_sell_cli.py tqqq 5000 --mid-price --stop-loss-pct 1 --take-profit-pct 1.5"
    cooldown: 3600