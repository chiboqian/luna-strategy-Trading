rules:
  # Trend Monitor: SPY Uptrend (Price > SMA 50)
  - name: "SPY Uptrend"
    symbol: "SPY"
    asset_class: "stock"
    trigger: "bar"
    conditions:
      - field: "close"
        operator: ">"
        value: "sma_50"
      - field: "rsi_14"
        operator: "<"
        value: 65.0
      - field: "z_score_vwap_50"
        operator: "<"
        value: 2.0
    action:
      command: "python Trading/Trading/alpaca_buy_cli.py upro 5000 --mid-price --stop-loss-pct 1 --take-profit-pct 1.5"
    cooldown: 900

  # Trend Monitor: SPY Downtrend (Price < SMA 50)
  - name: "SPY Downtrend"
    symbol: "SPY"
    asset_class: "stock"
    trigger: "bar"
    conditions:
      - field: "close"
        operator: "<"
        value: "sma_50"
      - field: "rsi_14"
        operator: ">"
        value: 35.0
    action:
      command: "python Trading/Trading/alpaca_short_sell_cli.py upro 5000 --mid-price --stop-loss-pct 1 --take-profit-pct 1.5"
    cooldown: 900

  # Example 13: Multi-Condition Trigger (AND Logic)
  # Triggers when RSI is oversold AND Price is below SMA 200
  - name: "SPY Oversold Downtrend"
    symbol: "SPY"
    asset_class: "stock"
    trigger: "bar"
    conditions:
      - field: "rsi_14"
        operator: "<"
        value: 25.0
      - field: "close"
        operator: "<"
        value: "sma_200"
    action:
      # RSI < 30 suggests a bounce, so we execute a Long Call (Counter-trend trade)
      #command: "{python} Trading/options_trading/long_call.py upro --amount 5000 --limit-order --days 30"
      command: "python Trading/Trading/alpaca_buy_cli.py upro 5000 --mid-price --stop-loss-pct 1 --take-profit-pct 1.5"
    cooldown: 3600

  # Example 15: VWAP Mean Reversion (Short)
  # Triggers when price is 2 Standard Deviations ABOVE the VWAP (Overextended)
  - name: "SPY VWAP Overextended Short"
    symbol: "SPY"
    asset_class: "stock"
    trigger: "bar"
    condition:
      field: "z_score_vwap_50"
      operator: ">"
      value: 2.0
    action:
      # Short Sell SPY
      command: "python Trading/Trading/alpaca_short_sell_cli.py upro 5000 --mid-price --stop-loss-pct 1 --take-profit-pct 1.5"
    cooldown: 3600

  # Trend Monitor: QQQ Uptrend (Price > SMA 50)
  - name: "QQQ Uptrend"
    symbol: "QQQ"
    asset_class: "stock"
    trigger: "bar"
    conditions:
      - field: "close"
        operator: ">"
        value: "sma_50"
      - field: "rsi_14"
        operator: "<"
        value: 65.0
      - field: "z_score_vwap_50"
        operator: "<"
        value: 2.0
    action:
      command: "python Trading/Trading/alpaca_buy_cli.py tqqq 5000 --mid-price --stop-loss-pct 1 --take-profit-pct 1.5"
    cooldown: 900

  # Trend Monitor: QQQ Downtrend (Price < SMA 50)
  - name: "QQQ Downtrend"
    symbol: "QQQ"
    asset_class: "stock"
    trigger: "bar"
    conditions:
      - field: "close"
        operator: "<"
        value: "sma_50"
      - field: "rsi_14"
        operator: ">"
        value: 35.0
    action:
      command: "python Trading/Trading/alpaca_short_sell_cli.py tqqq 5000 --mid-price --stop-loss-pct 1 --take-profit-pct 1.5"
    cooldown: 900

  # Example 14: Opposite Trigger (Overbought Uptrend)
  # Triggers when RSI is overbought (> 75) AND Price is above SMA 200
  - name: "QQQ Overbought Uptrend"
    symbol: "QQQ"
    asset_class: "stock"
    trigger: "bar"
    conditions:
      - field: "rsi_14"
        operator: ">"
        value: 75.0
      - field: "close"
        operator: ">"
        value: "sma_200"
    action:
      # RSI > 70 suggests a pullback, so we execute a Long Put (Mean Reversion trade)
      #command: "{python} Trading/options_trading/long_put.py tqqq --amount 5000 --limit-order --days 30"
      command: "python Trading/Trading/alpaca_short_sell_cli.py tqqq 5000 --mid-price --stop-loss-pct 1 --take-profit-pct 1.5"
    cooldown: 3600